作业5

本节作业

作业5：
ATM：模拟实现一个ATM + 购物商城程序

额度 15000或自定义
实现购物商城，买东西加入 购物车，调用信用卡接口结账
可以提现，手续费5%
支持多账户登录
支持账户间转账
记录每月日常消费流水
提供还款接口
ATM记录操作日志
提供管理接口，包括添加账户、用户额度，冻结账户等。。。
用户认证用装饰器

博客地址:
http://www.cnblogs.com/lixiang1013/p/6900981.html

模拟实现一个ATM + 购物商城程序

程序结构
DAY6-李祥-计算器
|-- bin
|   |-- atm            ATM程序
|   |   |-- bin        ATM程序主程序目录
|   |   |-- conf       ATM程序配置文件目录
|   |   |-- core       ATM程序核心目录
|   |   |-- db         ATM程序数据库文件目录
|   |   `-- log        ATM程序日志文件目录
|   `-- shops          shops程序
|       |-- bin        shops程序主程序目录
|       |-- conf       shops程序配置文件目录
|       |-- core       shops程序核心目录
|       |-- db         shops程序数据库文件目录
       `|-- log        shops程序日志文件目录

1. 程序说明
    额度 15000或自定义
    实现购物商城，买东西加入 购物车，调用信用卡接口结账
    可以提现，手续费5%
    支持多账户登录
    支持账户间转账
    记录每月日常消费流水
    提供还款接口
    ATM记录操作日志
    提供管理接口，包括添加账户、用户额度，冻结账户等。。。
    用户认证用装饰器

2. 测试用例
    ATM账号:
        管理员开号:1 密码1
        普通用户:2   密码2
        普通用户:3   密码3
        新注册用户4: 密码4

     shop账号:
        新注册用户:zhongguo 密码:123456

3. 程序测试

    ATM测试
    ---------------------------------------------------------------------------------------------------------------------------
    ATM:       python DAY5-李祥－ATM/bin/atm/bin/runner.py
    SHOP:      python DAY5-李祥－ATM/bin/shops/bin/runner2.py

1)注册用户

-------------登陆管理-----------------
            1:用户开卡
            2:用户登录
            其他键退出
---------------------------------------

请选择操作>>1
请输入您的姓名>>4
请输入您的密码>>4

    ---------------------------------------------
    恭喜姓名为:4的用户开卡成功
    你的卡号为:4
    你的信用额度为:15000元
    你的还款日期为每月第22天
    登陆请使用开号登录
    ---------------------------------------------


-------------用户管理中心-----------------
        1:查询用户信息
        2：提现
        3：还款
        4：转账
        5:查看账单
        0：退出
---------------------------------------

2)查询用户信息
-------------用户管理中心-----------------
        1:查询用户信息
        2：提现
        3：还款
        4：转账
        5:查看账单
        0：退出
---------------------------------------

请选择操作>>1

----------用户信息-------------------
    开   号：4
    姓   名：4
    信用额度：15000元
    剩余额度：15000元
    注册日期：2017-05-24
    过期日期：2021-05-24
    每月还款日：22
--------------------------------------

3)提现
请选择操作>>3
-------还款提示----------------
输入还款的金额>>100
姓名为[4]的用户，开号为[4]额度金额变为[15100.0]元

-------------用户管理中心-----------------
        1:查询用户信息
        2：提现
        3：还款
        4：转账
        5:查看账单
        0：退出
---------------------------------------

4)还款
请选择操作>>3
-------还款提示----------------
输入还款的金额>>100
姓名为[4]的用户，开号为[4]额度金额变为[14990.0]元

5)转账
请选择操作>>4
-------转账提示----------------
输入转账的账号>>3
输入转账的金额>>100
开号为[4]向开号为[3]转账[100]元成功

6)查看账单

请选择操作>>5
[2017-05-24 17:08:26]开号为[4]的用户还款金额为[100.0],手续费[0.0]
[2017-05-24 17:09:36]开号为[4]的用户转账金额为[100.0],手续费[5.0]
[2017-05-24 17:11:20]开号为[4]的用户转账金额为[100.0],手续费[5.0]
[2017-05-24 17:12:04]开号为[4]的用户还款金额为[100.0],手续费[0.0]
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
1)管理账号登录

-------------登陆管理-----------------
            1:用户开卡
            2:用户登录
            其他键退出
---------------------------------------

请选择操作>>2
请输入您的卡号>>1
请输入您的密码>>1

-------------管理员管理中心---------------------
        1:查询用户信息
        2：提现
        3：还款
        4：转账
        5：添加用户
        6：调整用户信用额度
        7：调整用户还款日期
        8：冻结用户
        9: 解除冻结用户
        10:查看用户账单
        0：退出
----------------------------------------------


2)查询用户信息

请选择操作>>1
输入查询信用卡的卡号>>4

    ----------用户信息-------------------
    开   号：4
    姓   名：4
    信用额度：15000元
    剩余额度：14990.0元
    注册日期：2017-05-24
    过期日期：2021-05-24
    每月还款日：22
    --------------------------------------
3)提现
请选择操作>>2
-------提现提示----------------
输入提取的金额>>100
姓名为[1]的用户，开号为[1]额度金额变为[888.0]元

4)还款
请选择操作>>3
-------还款提示----------------
输入还款的金额>>15000
姓名为[1]的用户，开号为[1]额度金额变为[15888.0]元

5)添加用户
请选择操作>>5
请输入您的姓名>>5
请输入您的密码>>5

    ---------------------------------------------
    恭喜姓名为:5的用户开卡成功
    你的卡号为:5
    你的信用额度为:15000元
    你的还款日期为每月第22天
    登陆请使用开号登录
    ---------------------------------------------
6)调整用户信用额度

请选择操作>>5
请输入您的姓名>>5
请输入您的密码>>5

    ---------------------------------------------
    恭喜姓名为:5的用户开卡成功
    你的卡号为:5
    你的信用额度为:15000元
    你的还款日期为每月第22天
    登陆请使用开号登录
    ---------------------------------------------
7)调整用户还款日期
请选择操作>>7
输入修改信用卡的卡号>>4
输入修改信用还款日（1-28）>>23
开号为[4]修改还款日为[23]

8))解除冻结用户
请选择操作>>8
输入修改信用卡的卡号>>5
开号为[5]已解除冻结

9)冻结用户
输入修改信用卡的卡号>>5
开号为[5]已冻结

10)查看用户账单
请选择操作>>10
请输入卡号>>4
[2017-05-24 17:08:26]开号为[4]的用户还款金额为[100.0],手续费[0.0]
[2017-05-24 17:09:36]开号为[4]的用户转账金额为[100.0],手续费[5.0]
[2017-05-24 17:11:20]开号为[4]的用户转账金额为[100.0],手续费[5.0]
[2017-05-24 17:12:04]开号为[4]的用户还款金额为[100.0],手续费[0.0]

+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

商品购物
1)注册用户
-------商品购物-------------
       1:注册用户
       2:用户登录
       其他键退出
---------------------------

请选择操作>>1
请输入用户名>>zhongguo
请输入密码>>123456
请输入信用卡号>>4
用户名为zhongguo的用户注册成功

-------------购物操作-----------------
        1:查看商品
        2：开始购物
        3：查看已购商品
        4：还信用卡
        0：退出
-------------------------------------

2017-05-24 17:23:14,872  INFO - 用户[zhongguo]于[2017-05-24]注册成功

2)查看商品
-------商品购物-------------
       1:注册用户
       2:用户登录
       其他键退出
---------------------------

请选择操作>>1
请输入用户名>>zhongguo
请输入密码>>123456
请输入信用卡号>>4
用户名为zhongguo的用户注册成功

-------------购物操作-----------------
        1:查看商品
        2：开始购物
        3：查看已购商品
        4：还信用卡
        0：退出
-------------------------------------

2017-05-24 17:23:14,872  INFO - 用户[zhongguo]于[2017-05-24]注册成功

3)开始购物
请选择操作>>2
商品信息如下:
------------
0 iphone 8999
1 haiwei 2999
2 xiaomi 1999
请选择购买商品序号，q查看购物车，b退出>>0
1:立即支付,2:加入购物车>>2
商品信息如下:
------------
0 iphone 8999
1 haiwei 2999
2 xiaomi 1999
请选择购买商品序号，q查看购物车，b退出>>1
1:立即支付,2:加入购物车>>1
请输入信用卡的密码>>4
2017-05-24 18:44:55,121  INFO - 开号:4   消费:consume    金额:11998.0   手续费:0.0
2017-05-24 18:44:55,121  INFO - 姓名为[4]的用户，开号为[4]额度金额变为[9008.0]元
2017-05-24 18:44:55,121  INFO - 开号为[4]消费[11998.0]元
姓名为[4]的用户，开号为[4]额度金额变为[9008.0]元
商品信息如下:
------------
0 iphone 8999
1 haiwei 2999
2 xiaomi 1999
请选择购买商品序号，q查看购物车，b退出>>q
购物车里商品好下：
商品信息如下:
------------
0 iphone 8999
1 haiwei 2999
2 xiaomi 1999
请选择购买商品序号，q查看购物车，b退出>>b
2017-05-24 18:45:33,618  INFO - [2017-05-24 18:45:33]用户[zhongguo]成功购买[iphone]价格为[8999]元
成功购买的商品如下:
------------------------------
商品名称：iphone,价格为:8999
商品名称：haiwei,价格为:2999
2017-05-24 18:45:33,619  INFO - [2017-05-24 18:45:33]用户[zhongguo]成功购买[haiwei]价格为[2999]元

4)查看已购商品
请选择操作>>3
2017-05-24 18:45:42,380  INFO - [2017-05-24 18:41:27]用户[zhongguo]购买商品[xiaomi]价格为[1999]元
[2017-05-24 18:41:27]用户[zhongguo]购买商品[xiaomi]价格为[1999]元
2017-05-24 18:45:42,381  INFO - [2017-05-24 18:45:33]用户[zhongguo]购买商品[iphone]价格为[8999]元
[2017-05-24 18:45:33]用户[zhongguo]购买商品[iphone]价格为[8999]元
2017-05-24 18:45:42,381  INFO - [2017-05-24 18:45:33]用户[zhongguo]购买商品[haiwei]价格为[2999]元
[2017-05-24 18:45:33]用户[zhongguo]购买商品[haiwei]价格为[2999]元

5)还信用卡

请选择操作>>4
请输入信用卡的密码>>4
需要还款金额为[10992.0]
-------还款提示----------------
输入还款的金额>>10992.0
%s，请重新输入

输入还款的金额>>10992
2017-05-24 18:50:21,416  INFO - 开号:4   还款:repay    金额:10992.0   手续费:0.0
姓名为[4]的用户，开号为[4]额度金额变为[20000.0]元
2017-05-24 18:50:21,416  INFO - 姓名为[4]的用户，开号为[4]额度金额变为[20000.0]元

2017-05-24 18:50:21,416  INFO - 姓名为[4]的用户，开号为[4]还款[10992]元成功，剩余金额为[20000.0]元
-------------购物操作-----------------
        1:查看商品
        2：开始购物
        3：查看已购商品
        4：还信用卡
        0：退出
-------------------------------------